# Работа со снапшотами в OpenSUSE

## OpenSUSE использует систему Snapper для управления снапшотами файловой системы Btrfs.

## Вот основные команды и принципы работы со снапшотами:

### 1) Основные команды Snapper
* Просмотр списка снапшотов:
```
sudo snapper list
```
* Создание нового снапшота:
```
sudo snapper create --description "Описание снапшота"
```
* Сравнение снапшотов:
```
sudo snapper diff 123 456
```
* Возврат к предыдущему снапшоту:
```
sudo snapper rollback номер_снапшота
```
* Удаление снапшота:
```
sudo snapper delete номер_снапшота
```

### 2) Автоматические снапшоты
* **OpenSUSE по умолчанию настроен на создание снапшотов:**
  * Перед и после установки пакетов
  * Ежечасно (если система активна)
  * Ежедневно (хранятся несколько дней)

* **Настройка Snapper**
  * Конфигурационные файлы находятся в /etc/snapper/configs/.
  * Для изменения настроек:
```
sudo nano /etc/snapper/configs/root
```
  * Основные параметры:
```
TIMELINE_CREATE - включение/отключение автоматических снапшотов
TIMELINE_LIMIT_HOURLY - количество сохраняемых часовых снапшотов
TIMELINE_LIMIT_DAILY - количество сохраняемых дневных снапшотов
```

### 3)  Доступ к файлам в снапшотах
* **Все снапшоты доступны в директории /.snapshots/ или через подкаталог .snapshots в корне каждого подтома Btrfs.**

### 4) Освобождение места
* Для управления пространством, занятым снапшотами:
```
sudo snapper cleanup number

sudo snapper cleanup timeline
```
