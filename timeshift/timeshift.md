# timeshift занимает много места на диске
* Timeshift - это утилита для создания резервных копий системы в Linux.

1. размер папки timeshift:
```
sudo du -sh /timeshift

sudo du -sh /var/timeshift
```
2. Чтобы получить дерево каталогов timeshift:
```
sudo tree -L 2 /timeshift > ~/timeshift_tree.txt
```    
3. Это создаст файл с деревом каталогов до глубины 2 уровня. Если нужно полное дерево:
```
sudo tree /timeshift > ~/timeshift_full_tree.txt
```

4. Для очистки старых снимков Timeshift:
* Использовать графический интерфейс Timeshift, если он установлен:
```
sudo timeshift-gtk
```

5. Или удалить старые снимки через командную строку:
```
sudo timeshift --list
```

6. Затем удалить конкретный снимок:
```
sudo timeshift --delete --snapshot '2023-01-01_00-00-00'
```
7. После удаления снимков, освободите место на диске:
```
Замените '2023-01-01_00-00-00' на имя снимка, который вы хотите удалить.
```

8. Если вы хотите полностью удалить все снимки и саму программу Timeshift:
```
sudo apt purge timeshift
```

9. После удаления снимков не забудьте освободить место:
```
sudo apt autoremove
```

10. Сначала посмотрим, какие снимки есть:
```
sudo timeshift --list
```
11. Это покажет все существующие снимки с датами их создания.
* Скорее всего, накопилось много старых снимков, которые можно безопасно удалить.
* Вы можете удалить отдельные снимки, указав их имена:
```
sudo timeshift --delete --snapshot '2023-01-01_00-00-00'
```

12. Или удалить все снимки сразу (будьте осторожны с этим):
```
sudo timeshift --delete-all
```

13. Если вы хотите сохранить только несколько последних снимков, можно настроить Timeshift на автоматическое удаление старых снимков:
```
sudo timeshift-gtk
```
* В графическом интерфейсе перейдите в "Настройки" и установите ограничение на количество хранимых снимков.
* Если вы больше не планируете использовать Timeshift, можно полностью удалить программу:
```
sudo apt purge timeshift
```

14. После этого проверьте, освободилось ли место:
```
df -h


(base) leon@starmark-GA-890GPA-UD3H:/timeshift$ sudo timeshift --list

Mounted '/dev/dm-0 (sda5)' at '/run/timeshift/44418/backup'

Device : /dev/dm-0 (sda5)

UUID   : d74b94ff-77e5-455b-bf5e-f25ece18fd17

Path   : /run/timeshift/44418/backup

Mode   : RSYNC

Status : OK

10 snapshots, 387.4 GB free

Num     Name                 Tags  Description                 

------------------------------------------------------------------------------

0    >  2021-07-24_19-25-32  O                                 

1    >  2021-07-25_16-15-57  O                                 

2    >  2021-07-25_17-40-17  O                                 

3    >  2021-07-25_20-31-47  O                                 

4    >  2021-07-28_13-58-50  O     Raid md0 md1; LVM vg1, vg2  

5    >  2025-03-11_21-00-01  D                                 

6    >  2025-03-12_21-00-01  D                                 

7    >  2025-03-13_21-00-01  D                                 

8    >  2025-03-14_21-00-01  D                                 

9    >  2025-03-15_21-00-01  D                                 

Found stale mount for device '/dev/dm-0' at path '/run/timeshift/44418/backup'

Unmounted successfully
```

15. Давайте удалим эти снимки, начиная с тех, что имеют будущие даты:
```
sudo timeshift --delete --snapshot '2025-03-11_21-00-01'
sudo timeshift --delete --snapshot '2025-03-12_21-00-01'
sudo timeshift --delete --snapshot '2025-03-13_21-00-01'
sudo timeshift --delete --snapshot '2025-03-14_21-00-01'
sudo timeshift --delete --snapshot '2025-03-15_21-00-01'
```

16. Затем удалим старые снимки от 2021 года, если они вам больше не нужны:
```
sudo timeshift --delete --snapshot '2021-07-24_19-25-32'
sudo timeshift --delete --snapshot '2021-07-25_16-15-57'
sudo timeshift --delete --snapshot '2021-07-25_17-40-17'
sudo timeshift --delete --snapshot '2021-07-25_20-31-47'
```

17. Если вы хотите сохранить только снимок с описанием "Raid md0 md1; LVM vg1, vg2", оставьте его:
```
sudo timeshift --delete --snapshot '2021-07-28_13-58-50'
```

18. После удаления снимков проверьте, сколько места освободилось:
```
df -h
```

19. Также рекомендую настроить Timeshift, чтобы избежать подобных проблем в будущем:
```
sudo timeshift-gtk
```

* Установите разумное количество снимков для хранения (например, 3-5)
* Настройте расписание создания снимков (например, раз в неделю)
* Убедитесь, что системное время настроено правильно, чтобы избежать снимков с датами из будущего
* Если вы больше не планируете использовать Timeshift, можно полностью удалить программу после очистки снимков:
```
sudo apt purge timeshift
```

20. Удаление снимков Timeshift само по себе не испортит вашу систему. Вот почему:
```
Снимки Timeshift - это резервные копии вашей системы на определенный момент времени. Они хранятся отдельно от вашей текущей работающей системы.

Удаление снимка просто удаляет эту конкретную резервную копию, но никак не влияет на вашу текущую работающую систему.

Снимки с датами из будущего (2025 год) скорее всего были созданы из-за ошибки в системном времени и не представляют ценности.

Снимки от 2021 года очень старые и, вероятно, уже не соответствуют вашей текущей системе.

Однако, есть несколько моментов предосторожности:

Если вы удалите все снимки, у вас не останется точек восстановления в случае проблем с системой.

Рекомендую оставить хотя бы один последний "хороший" снимок (возможно, тот с описанием "Raid md0 md1; LVM vg1, vg2", если он представляет стабильное состояние системы).

Перед удалением большого количества снимков, убедитесь, что ваша система работает стабильно.

Если вы беспокоитесь, можно начать с удаления только снимков с датами из будущего (2025 год), проверить, что система работает нормально, а затем постепенно удалять более старые снимки.

Также стоит отметить, что 104 ГБ - это очень много места для снимков Timeshift, и освобождение этого пространства, скорее всего, положительно скажется на работе вашей системы.
```

21. В настройках вы можете:
* Ограничить количество хранимых снимков
* Настроить расписание создания снимков
* Установить лимит на использование дискового пространства
* Теперь ваша система должна работать лучше с освобожденным дисковым пространством!