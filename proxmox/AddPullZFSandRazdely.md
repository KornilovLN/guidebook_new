# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–∞ proxmox –Ω–∞ –æ—Å–Ω–æ–≤–µ zfs

    –ü–æ–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–∞ proxmox –Ω–∞ –æ—Å–Ω–æ–≤–µ zfs raidz1 –∏ —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏ –ø–æ–¥ ISO, VM, Docker-cont —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –≤ –±—É–¥—É—â–µ–º –µ—â–µ hdd 1 Tb rpm 7200 –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –Ω–µ–≥–æ —Ç—É –Ω–∞–≥—Ä—É–∑–∫—É, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã. –ü–æ–∫–∞ –Ω–µ –∑–Ω–∞—é, —á—Ç–æ. –ü—Ä–∏ —ç—Ç–æ–º –¥–∏—Å–∫ SSD –º—ã –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º. –ò—Ç–∞–∫ - –æ—Ç —Ç–µ–±—è –ø–ª–∞–Ω —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ–¥—Ä–æ–±–Ω–æ. –ò –µ—â–µ 2-–π –≤–æ–ø—Ä–æ—Å : –ú–æ–∂–Ω–æ –ª–∏ –Ω–µ —á–µ—Ä–µ–∑ WEB –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞ –ø–æ ssh –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ ansible . –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Bash, –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ Bash, –∏–ª–∏ Python –∏–ª–∏ –¥–∞–∂–µ –Ω–∞ GO???

## –ü–ª–∞–Ω: —Å–æ–∑–¥–∞–Ω–∏–µ ZFS RAIDZ1 —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è Proxmox –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ CLI.

### üìã –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–∏. –≠—Ç–æ –¥–≤–∞ –≤–∞—à–∏—Ö 3TB HDD, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–ª–µ–¥—É–µ—Ç –ø—É—Ç–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º SSD.

    –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–∏—Å–∫–æ–≤:
```bash

ls -l /dev/disk/by-id/
```

    –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–∏ HDD
    (–Ω–∞–ø—Ä–∏–º–µ—Ä, ata-WDC_WD30EFRX-68EUZN0_WD-WCC4N0xxxxxxx).
    –í–∞–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, –∞ –Ω–µ /dev/sdX

    
* **–ü–ª–∞–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ZFS:**
  * –°–æ–∑–¥–∞–¥–∏–º –æ–¥–∏–Ω ZFS pool (vm-storage) –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ RAIDZ1 (–æ–¥–∏–Ω –¥–∏—Å–∫ –Ω–∞ –æ—Ç–∫–∞–∑, –ø–æ–ª–µ–∑–Ω—ã–π –æ–±—ä—ë–º ~3TB).
  * –í–Ω—É—Ç—Ä–∏ –ø—É–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º —Ç—Ä–∏ dataset (—Ä–∞–∑–¥–µ–ª–∞) –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## üíª –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ ZFS pool –∏ dataset —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

–≠—Ç–æ—Ç —ç—Ç–∞–ø –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ SSH –∏–ª–∏ –∫–æ–Ω—Å–æ–ª—å (–Ω–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å).

* **–°–æ–∑–¥–∞–π—Ç–µ ZFS pool –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ RAIDZ1.
  * –ó–∞–º–µ–Ω–∏—Ç–µ [disk1-id] –∏ [disk2-id] –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID –≤–∞—à–∏—Ö –¥–∏—Å–∫–æ–≤. 
  * –ö–æ–º–∞–Ω–¥–∞ ashift=12 –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–∏—Å–∫–∞–º–∏ 
```bash
zpool create -o ashift=12 vm-storage raidz1 /dev/disk/by-id/[disk1-id] /dev/disk/by-id/[disk2-id]
```
  * –í–∞–∂–Ω–æ: –í ZFS –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –¥–∏—Å–∫ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π RAIDZ1 vdev
  * –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—É–ª, –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—É—é –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É (vdev). –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –æ–¥–∏–Ω RAIDZ1 –∏–∑ –¥–∏—Å–∫–æ–≤.

* **–°–æ–∑–¥–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–∏ –ø—É–ª–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ dataset –¥–ª—è VM, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ ISO.**
```bash
zfs create vm-storage/vm-disks
zfs create vm-storage/container-data
zfs create vm-storage/iso
```

* **–≠—Ç–∏ dataset –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤:**
  * /vm-storage/vm-disks,
  * /vm-storage/container-data –∏
  * /vm-storage/iso.

### üñ•Ô∏è –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–ª–∞ –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ Proxmox

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—É–ª –≤–∏–¥–∏–º—ã–º –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Proxmox.
```text
    –î–æ–±–∞–≤—å—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π ZFS –ø—É–ª:

        –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ: Datacenter ‚Üí Storage.

        –ù–∞–∂–º–∏—Ç–µ Add ‚Üí ZFS.

        –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—É–ª (vm-storage) –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞.

        –í –ø–æ–ª–µ Content –≤—ã–±–µ—Ä–∏—Ç–µ: Disk image, Container, Container template. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω.

        –ù–∞–∂–º–∏—Ç–µ Add.

    –î–æ–±–∞–≤—å—Ç–µ dataset –¥–ª—è ISO-–æ–±—Ä–∞–∑–æ–≤ –∫–∞–∫ Directory:

        –í —Ç–æ–º –∂–µ –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ Add ‚Üí Directory.

        ID: –Ω–∞–ø—Ä–∏–º–µ—Ä, vm-storage-iso.

        Directory: —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å /vm-storage/iso.

        Content: –≤—ã–±–µ—Ä–∏—Ç–µ ISO image.

        –ù–∞–∂–º–∏—Ç–µ Add.
```

### üê≥ –®–∞–≥ 4: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è Docker

* **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±:**
  * —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å Linux (–Ω–∞–ø—Ä–∏–º–µ—Ä, Debian) –Ω–∞ –Ω–æ–≤–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (vm-storage) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ –Ω–µ—ë Docker.
  * –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—é, —á–µ–º LXC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  * –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –í–ú –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Compose –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.
  * –í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, Docker –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –≤ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º LXC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### üîÆ –®–∞–≥ 5: –ü–ª–∞–Ω –Ω–∞ –±—É–¥—É—â–µ–µ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ 1TB –¥–∏—Å–∫–∞)

* **–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –±—ã—Å—Ç—Ä—ã–π 1TB HDD –Ω–µ –≤ RAIDZ1, —É –≤–∞—Å –µ—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞:**

| –û–ø—Ü–∏—è	| –û–ø–∏—Å–∞–Ω–∏–µ	| –ö–æ–º–∞–Ω–¥–∞ (–ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∏—Å–∫–∞)
|---|---|--- 
A. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π pool –¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏	| –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –í–ú, —Ç—Ä–µ–±—É—é—â—É—é —Å–∫–æ—Ä–æ—Å—Ç–∏. –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç–∫–∞–∑–æ–º –¥–∏—Å–∫–∞.	| zpool create -o ashift=12 fast-1tb /dev/disk/by-id/[new-disk-id]
| B. –î–æ–±–∞–≤–∏—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π vdev –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ø—É–ª—É	| –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –£–≤–µ–ª–∏—á–∏—Ç –æ–±—ä—ë–º, –Ω–æ —Å–Ω–∏–∑–∏—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –≤—Å–µ–≥–æ vm-storage, –ø—Ä–µ–≤—Ä–∞—Ç–∏–≤ –µ–≥–æ –≤ –∞–Ω–∞–ª–æ–≥ RAID 0 –ø–æ–≤–µ—Ä—Ö RAIDZ1 | zpool add vm-storage /dev/disk/by-id/[new-disk-id]

* **–†–µ–∫–æ–º–µ–Ω–¥—É—é –û–ø—Ü–∏—é A.**
  * –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ Proxmox –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –Ω–∞ –Ω—ë–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –í–ú.

### ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ansible, Bash, Python –∏–ª–∏ Go

–î–∞, –≤—Å–µ —ç—Ç–∏ –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –í–æ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤:

| –°–ø–æ—Å–æ–±	| –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞	| –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ | –î–ª—è –≤–∞—à–µ–π –∑–∞–¥–∞—á–∏
|---|---|---|--- 
| Bash-—Å–∫—Ä–∏–ø—Ç	| –ü—Ä–æ—Å—Ç–æ—Ç–∞, –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ ZFS. | –•—Ä—É–ø–∫–æ—Å—Ç—å, –Ω–µ—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.	| –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –Ω–∞–ø–∏—Å–∞—Ç—å.
| Ansible	| –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.	| –¢—Ä–µ–±—É–µ—Ç –∏–∑—É—á–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π (community.general.zfs).	| –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
| Python —Å libzfs_core	| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, | —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞.	–°–ª–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è.	| –ò–∑–±—ã—Ç–æ—á–µ–Ω –¥–ª—è –±–∞–∑–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
| Go	| –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.	| –ù–∞–∏–±–æ–ª—å—à–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.	| –ò–∑–±—ã—Ç–æ—á–µ–Ω.

–ü—Ä–∏–º–µ—Ä —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ Ansible-–ø–ª–µ–π–±—É–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è pool (–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ):
```yaml
- name: Create ZFS pool
  community.general.zfs_pool:
    name: "vm-storage"
    state: present
    vdevs:
      - type: raidz1
        devices:
          - "/dev/disk/by-id/[disk1-id]"
          - "/dev/disk/by-id/[disk2-id]"
    properties:
      ashift: 12
```

#### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–µ ZFS-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –æ—Ç–¥–µ–ª—ë–Ω–Ω–æ–µ –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ SSD, —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.


# –°–∞–º–∞ —Ä–∞–±–æ—Ç–∞:

## –í–æ—Ç —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å ->
```root@pve:~# ls -l /dev/disk/by-id/
total 0
lrwxrwxrwx 1 root root  9 Jan 11 14:28 ata-KINGSTON_SH103S3240G_50026B723A0788F8 -> ../../sda
lrwxrwxrwx 1 root root 10 Jan 11 14:28 ata-KINGSTON_SH103S3240G_50026B723A0788F8-part1 -> ../../sda1
lrwxrwxrwx 1 root root 10 Jan 11 14:28 ata-KINGSTON_SH103S3240G_50026B723A0788F8-part2 -> ../../sda2
lrwxrwxrwx 1 root root 10 Jan 11 14:28 ata-KINGSTON_SH103S3240G_50026B723A0788F8-part3 -> ../../sda3
lrwxrwxrwx 1 root root  9 Jan 11 14:28 ata-WDC_WD30EFRX-68EUZN0_WD-WMC4N1931146 -> ../../sdb
lrwxrwxrwx 1 root root  9 Jan 11 14:28 ata-WDC_WD30EFRX-68EUZN0_WD-WMC4N1934279 -> ../../sdc
lrwxrwxrwx 1 root root 10 Jan 11 14:28 dm-name-pve-root -> ../../dm-1
lrwxrwxrwx 1 root root 10 Jan 11 14:28 dm-name-pve-swap -> ../../dm-0
lrwxrwxrwx 1 root root 10 Jan 11 14:28 dm-uuid-LVM-5BX61FwQ47AacnLyM1gHfX4D06lcVkmd95nUlAfI28ruipul1E0ffiYuS8evKJfV -> ../../dm-1
lrwxrwxrwx 1 root root 10 Jan 11 14:28 dm-uuid-LVM-5BX61FwQ47AacnLyM1gHfX4D06lcVkmdOr8u0s7q7G3r5A8fhIbsxA10JcGwyGhN -> ../../dm-0
lrwxrwxrwx 1 root root 10 Jan 11 14:28 lvm-pv-uuid-XwJeBn-dhh3-g9aR-K7g8-VSiE-jApp-UOO8Jv -> ../../sda3
lrwxrwxrwx 1 root root  9 Jan 11 14:28 wwn-0x50014ee60434a563 -> ../../sdc
lrwxrwxrwx 1 root root  9 Jan 11 14:28 wwn-0x50014ee6aedf2c6d -> ../../sdb
lrwxrwxrwx 1 root root  9 Jan 11 14:28 wwn-0x50026b723a0788f8 -> ../../sda
lrwxrwxrwx 1 root root 10 Jan 11 14:28 wwn-0x50026b723a0788f8-part1 -> ../../sda1
lrwxrwxrwx 1 root root 10 Jan 11 14:28 wwn-0x50026b723a0788f8-part2 -> ../../sda2
lrwxrwxrwx 1 root root 10 Jan 11 14:28 wwn-0x50026b723a0788f8-part3 -> ../../sda3```
```

* **–í–∏–¥–Ω–æ, —á—Ç–æ –µ—Å—Ç—å:**
  * —Å–∏—Å—Ç–µ–º–Ω—ã–π SSD KINGSTON (sda) –∏
  * –¥–≤–∞ HDD WD Red 3TB (sdb –∏ sdc).
  * –°–∏—Å—Ç–µ–º–Ω—ã–π –¥–∏—Å–∫ –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å–º, –∞ –Ω–∞ –¥–≤—É—Ö HDD —Å–æ–∑–¥–∞–¥–∏–º ZFS RAIDZ1.

## üó∫Ô∏è –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

    –°–æ–∑–¥–∞–π—Ç–µ ZFS pool (vm-storage) –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ RAIDZ1 –∏–∑ –¥–≤—É—Ö –¥–∏—Å–∫–æ–≤ WD. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö ID:
```bash
zpool create -o ashift=12 vm-storage raidz1 \
    /dev/disk/by-id/ata-WDC_WD30EFRX-68EUZN0_WD-WMC4N1931146 \
    /dev/disk/by-id/ata-WDC_WD30EFRX-68EUZN0_WD-WMC4N1934279
```

    ashift=12 –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –¥–ª—è —Å–µ–∫—Ç–æ—Ä–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–º 4K (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∏—Å–∫–æ–≤).

    raidz1 —Å–æ–∑–¥–∞—Å—Ç –º–∞—Å—Å–∏–≤ —Å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å—é –Ω–∞ 1 –¥–∏—Å–∫.

    –í–∞–∂–Ω–æ: –í—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –¥–∏—Å–∫ –∫ —ç—Ç–æ–º—É –ø—É–ª—É –ø–æ–∑–∂–µ. –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—É—é –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É –¥–∏—Å–∫–æ–≤ (vdev), –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—â—ë –æ–¥–∏–Ω raidz1.

    –°–æ–∑–¥–∞–π—Ç–µ –≤–Ω—É—Ç—Ä–∏ –ø—É–ª–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã (dataset) –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:
```bash
zfs create vm-storage/vm-disks
zfs create vm-storage/container-data
zfs create vm-storage/iso
```

    –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ /vm-storage/vm-disks, /vm-storage/container-data –∏ /vm-storage/iso.

    –î–æ–±–∞–≤—å—Ç–µ –ø—É–ª –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ Proxmox —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

        –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Datacenter ‚Üí Storage.

        –ù–∞–∂–º–∏—Ç–µ Add ‚Üí ZFS.

